var payments={creditCardLength:{VISA:16,MC:16,AMEX:15},cvvLength:{VISA:3,MC:3,AMEX:4},getCreditCardType:function(d){var c={"VISA":/^4[0-9]{12}(?:[0-9]{3})?$/,"MC":/^5[1-5][0-9]{14}$/,"AMEX":/^3[47][0-9]{13}$/,"DINERS":/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,"DISCOVER":/^6(?:011|5[0-9]{2})[0-9]{12}$/,"JCB":/^(?:2131|1800|35\d{3})\d{11}$/};for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];if(b.test(d)){return a}}}return""},populateCardYears:function(f,e){var g=new Date();var b=g.getFullYear();for(var c=b;c<(b+e);c++){var a=c.toString().substr(2);f.append('<option value="'+a+'">'+c+"</option>")}},validation:{init:function(a){$.validator.addMethod("creditcardValid",function(f,c){var d=payments.getCreditCardType(f);var e=payments.creditCardLength[d]!=undefined?payments.creditCardLength[d]:0;var g=e>0?true:false;a.elem.type.val(d);a.elem.logo.removeClass();if(g){a.elem.logo.addClass("ccTypeLogo"+d);a.elem.cvv.attr("maxlength",payments.cvvLength[d])}else{a.elem.cvv.attr("maxlength",3)}return g});$.validator.addMethod("notExpired",function(e,c){var g=a.elem.form;var f=parseInt(a.elem.month.val());var d=2000+parseInt(a.elem.year.val());return new Date().valueOf()<new Date(d,f,1).valueOf()});$.validator.addMethod("cvvLength",function(g,d){var e=a.elem.type.val();var f=payments.cvvLength[e]?payments.cvvLength[e]:3;var c=a.elem.form.data("validator");c.settings.messages.cvv.cvvLength=$.validator.format(c.settings.messages.cvv.cvvLengthTmpl,f);return g.length==f});$.validator.addMethod("alphabeticChars",function(d,c){return(d.search(/[^\sa-zA-Z]/)===-1)});var b=a.elem.form.validate({onsubmit:false,onkeyup:false,focusCleanup:true,rules:{name:{required:true,alphabeticChars:true},number:{required:true,creditcardValid:true},month:{notExpired:true},cvv:{required:true,digits:true,cvvLength:true}},messages:{name:{required:"Please enter the Name on the Card",alphabeticChars:"Please only use alphabetic characters"},number:{required:"Please enter the Card Number",creditcardValid:"Invalid Card Number or Card Not Accepted"},month:{notExpired:"Please pick a Date in the future"},cvv:{required:"Please enter the Card CVV (located on the back of the card)",digits:"Please enter Numbers only",cvvLengthTmpl:"Please enter exactly {0} digits"}},invalidHandler:a.handler.invalidHandler,errorPlacement:a.handler.errorPlacement,success:a.handler.success});a.elem.cvv.blur(function(){a.elem.form.valid();if(a.handler.validated){a.handler.validated(b)}$("input, select",a.elem.form).not(a.elem.cvv).blur(function(){a.elem.form.valid();if(a.handler.validated){a.handler.validated(b)}})})},reset:function(b){var a=b.data("validator");if(a){a.resetForm()}$("input, select",b).removeClass("error");this.stopValidateAll()},stopValidateAll:function(a){$("input, select",a).not("input[name=cvv]").unbind("blur")}}};