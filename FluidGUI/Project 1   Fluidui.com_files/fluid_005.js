fluid.module.define("fluid.payments",function(d){var i,a,b,g,k,h,j=['<a id="userSettingsBillingHistory" class="userSettingsButton buttonBlueLighter textWhite top-15">','<span class="buttonTextLeft textWhite">Billing History and Info</span>','<span class="buttonTextRight textWhite">Change</span>',"</a>"].join(""),f=['<a id="userSettingsCardDetails" class="userSettingsButton buttonBlueLighter textWhite top-15">','<span class="buttonTextLeft textWhite">Payment Details</span>','<span class="buttonTextRight textWhite">Update</span>',"</a>"].join(""),c=['<a id="userSettingsChangeAccount" class="userSettingsButton buttonBlueDark buttonTall backFromUpgradeContainer">','<span class="buttonTextLeft textWhite currentAccType"></span>','<span class="buttonTextRight textWhite">Change</span>',"</a>"].join(""),e='<input id="upgradeLink" title="Change account type"  alt="Change account type" type="button" class="upgrade fluid-menu-item" value="">';a=function(){var l=account.get("maxActiveProjects");var m=project.activeProjectCount();if(l&&l!=0&&m>=l){return false}return true};k=function(){if(!account.canAddProjects()){notification.add("alert",account.alerts.projectLimitHit.onAddActive,{scope:"projectLimit",stopBuggingCallBack:projectSettings.actionActivateForced});return false}else{return true}};g=function(m){var l=account.get("accType");if(account.isStandard()||(m==="shareLinkExportLocal"&&(l==="lite"||l==="nokia1lite"||l==="nokia6lite"))){return true}notification.removeAll("alert","premiumAccess");var n;if(account.get("accType")!=="lite"&&m!=="shareLinkPrint"){n=account.alerts.projectLimitHit.onExportNonSignedIn}else{n=account.alerts.projectLimitHit.onExportNonStandard}notification.add("alert",n,{scope:"premiumAccess"});return false};b=function(){var l=account.get("maxPages");if(l!=0&&project.get("pages").length>=l){if(account.get("loggedIn")=="yes"){notification.add("alert",account.alerts.pageLimitHit.onAddActive,{scope:"pageLimit",stopBuggingCallBack:function(){}})}else{notification.add("alert",account.alerts.pageLimitHit.onNonSignedIn,{scope:"pageLimit",stopBuggingCallBack:function(){}})}return false}return true};h=function(){var n=document.querySelectorAll("#brandingImageTable .chooseFile input"),m=document.querySelectorAll("#brandingImageTable label.chooseFile");if(account.get("loggedIn")==="no"||account.isFreeAccount()||account.get("accType")==="lite"){for(var o=0,l=n.length;o<l;o++){n[o].setAttribute("disabled","")}for(var o=0,l=m.length;o<l;o++){m[o].classList.add("disabled")}}else{for(var o=0,l=n.length;o<l;o++){n[o].removeAttribute("disabled")}for(var o=0,l=m.length;o<l;o++){m[o].classList.remove("disabled")}}};i=function(){fluid.main.on("account.formDrawn",function(){$(e).insertAfter($("#profile #userSettingsLink"))});fluid.main.on("userSettings.afterInit",function(){var l=$("#userSettingsMain .ngsTopButtons");l.prepend(c);$(f).insertAfter($("#userSettingsChangePassword"));$(j).insertAfter($("#userSettingsChangePassword"))});fluid.main.on("project.beforeActivate",function(){return k()});fluid.main.on("page.beforeAdd",function(){return b()});fluid.main.on("share.beforeAction",function(l,m){return g(m)});fluid.main.on("branding.panelShow",h);account.canAddProjects=a};i()});